<% provide(:title, 'Profile') %>

<div class="container mt-3">
  <div class="row">
    <div class="col-sm text-center">
      <h1>プロフィール</h1>
    </div>
  </div>
</div>
<div class="container mt-4">
  <div class="row">
    <div class="col-sm">
      <table class="table table-bordered text-center w-75 mx-auto">
        <caption>
          天気予報の設定変更は <%= link_to 'LINE公式アカウント', Rails.application.credentials.line_api[:follow_url] %> の「メニュー」から行えます。
        </caption>
        <thead>
          <tr>
            <th class="table-active" scope="col" colspan="3">
              ユーザー情報　<span><%= link_to '変更', edit_user_registration_path %></span>
            </th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <th>メール</th>
            <td colspan="2"><%= @user.email %></td>
          </tr>
          <tr>
            <th>パスワード</th>
            <td colspan="2">非表示</td>
          </tr>
          <tr>
            <th class="table-active" scope="col" colspan="3">天気予報の設定</th>
          </tr>
          <tr>
            <th>予報位置</th>
            <td colspan="2"><%= @weather.try(:city) || '-' %></td>
          </tr>
          <tr>
            <th>通知時間</th>
            <td colspan="2"><%= @line_user.try(:notice_time) || '-' %></td>
          </tr>
          <tr>
            <th>サイレント通知</th>
            <td colspan="2"><%= @line_user.try(:silent_notice_text) || '-' %></td>
          </tr>
          <tr>
            <th class="table-active" scope="col" colspan="3">連携</th>
          </tr>
          <tr>
            <th>LINEアカウント</th>
            <td colspan="2"><%= @line_user ? '連携済み' : link_to('連携する', new_users_line_user_path) %></td>
          </tr>
          <tr>
            <th>Googleアカウント</th>
            <% if Rails.env.production? %>
              <td colspan="2">準備中です！</td>
            <% else %>
              <td colspan="2"><%= @calendar.google_id ? '連携済み' : link_to('連携する', @calendar.authorization_url(domain_url)) %></td>
            <% end %>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
